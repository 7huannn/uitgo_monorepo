<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UIT-Go: System Architecture Overview</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #f8f9fa;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .frame {
      width: 100%;
      max-width: 2000px;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.1);
      border-radius: 16px;
      overflow: auto;
      background: #ffffff;
    }
    svg {
      width: 100%;
      height: auto;
      display: block;
    }
  </style>
</head>
<body>
  <div class="frame">
    <!-- Inline SVG -->
    <svg xmlns="http://www.w3.org/2000/svg" width="2560" height="1800" viewBox="0 0 2560 1800" fill="none">
      <defs>
        <style>
          .title { font-family: Arial, sans-serif; font-weight: 700; font-size: 32px; }
          .subtitle { font-family: Arial, sans-serif; font-size: 18px; fill: #4b5563; }
          .layer-title { font-family: Arial, sans-serif; font-weight: 700; font-size: 24px; fill: #6b7280; letter-spacing: 1px; text-transform: uppercase; }
          .card-title { font-family: Arial, sans-serif; font-weight: 700; font-size: 20px; }
          .label { font-family: Arial, sans-serif; font-size: 16px; }
          .small { font-family: Arial, sans-serif; font-size: 14px; }
          .mono { font-family: "Courier New", monospace; font-size: 14px; }
          .arrow-label { font-family: Arial, sans-serif; font-size: 14px; font-style: italic; fill: #374151; }
        </style>
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
          <feDropShadow dx="0" dy="5" stdDeviation="10" flood-color="#1f2937" flood-opacity="0.1" />
        </filter>
        <marker id="arrow-solid" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <path d="M0,0 L10,3.5 L0,7 z" fill="#1e293b"/>
        </marker>
        <marker id="arrow-dashed" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <path d="M0,0 L10,3.5 L0,7 z" fill="#4338ca"/>
        </marker>
        <marker id="arrow-data" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <path d="M0,0 L10,3.5 L0,7 z" fill="#047857"/>
        </marker>
      </defs>

      <!-- Main Title -->
      <text x="1500" y="60" class="title" text-anchor="middle">UIT-Go: System Architecture Overview</text>
      <text x="1500" y="90" class="subtitle" text-anchor="middle">Cloud-Native Ride-Hailing Platform</text>

      <!-- LAYERS -->
      <rect x="400" y="130" width="2120" height="200" rx="20" fill="#f0f9ff" />
      <text x="430" y="170" class="layer-title">Clients & Actors</text>

      <rect x="400" y="350" width="2120" height="700" rx="20" fill="#fafafa" />
      <text x="430" y="390" class="layer-title">Application & Domain Layer</text>

      <rect x="400" y="1070" width="2120" height="360" rx="20" fill="#f0fdf4" />
      <text x="430" y="1110" class="layer-title">Data & State Layer</text>

      <rect x="400" y="1450" width="2120" height="280" rx="20" fill="#f1f5f9" />
      <text x="430" y="1490" class="layer-title">Platform & Runtime</text>

      <!-- SIDEBAR: Operations & Delivery -->
      <rect x="40" y="130" width="340" height="1600" rx="20" fill="#fdf2f8" />
      <text x="210" y="170" class="layer-title" text-anchor="middle">Operations</text>

      <!-- ==================== CLIENTS & ACTORS ==================== -->
      <g filter="url(#shadow)">
        <rect x="700" y="200" width="240" height="100" rx="12" fill="white" stroke="#9ca3af"/>
        <text x="820" y="240" class="card-title" text-anchor="middle">Rider App</text>
        <text x="820" y="265" class="small" text-anchor="middle">Flutter (iOS/Android/Web)</text>
      </g>
      <g filter="url(#shadow)">
        <rect x="1200" y="200" width="240" height="100" rx="12" fill="white" stroke="#9ca3af"/>
        <text x="1320" y="240" class="card-title" text-anchor="middle">Driver App</text>
        <text x="1320" y="265" class="small" text-anchor="middle">Flutter (iOS/Android/Web)</text>
      </g>
      <g filter="url(#shadow)">
        <rect x="1700" y="200" width="240" height="100" rx="12" fill="white" stroke="#9ca3af"/>
        <text x="1820" y="240" class="card-title" text-anchor="middle">Admin App</text>
        <text x="1820" y="265" class="small" text-anchor="middle">Flutter / Web</text>
      </g>

      <!-- ==================== APPLICATION & DOMAIN LAYER ==================== -->
      <!-- Ingress -->
      <g filter="url(#shadow)">
        <rect x="1270" y="420" width="300" height="80" rx="12" fill="#e0f2fe" stroke="#38bdf8"/>
        <text x="1420" y="465" class="card-title" text-anchor="middle">Traefik Ingress</text>
        <text x="1420" y="485" class="mono" text-anchor="middle">Host: uitgo.local</text>
      </g>
      <path d="M820,300 C820,380 1270,380 1270,420" stroke="#1e293b" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
      <text x="1045" y="370" class="arrow-label">HTTPS / REST</text>
      <path d="M1320,300 C1320,380 1370,380 1370,420" stroke="#1e293b" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
      <text x="1345" y="350" class="arrow-label">WebSocket / REST</text>

      <!-- Microservices -->
      <g filter="url(#shadow)">
        <rect x="500" y="550" width="450" height="300" rx="12" fill="white" stroke="#4338ca"/>
        <text x="725" y="590" class="card-title" text-anchor="middle">User Service</text>
        <text x="520" y="630" class="label" fill="#4338ca">Responsibilities:</text>
        <text x="530" y="660" class="small">• Authentication (JWT)</text>
        <text x="530" y="685" class="small">• User Profile Management</text>
        <text x="530" y="710" class="small">• Wallet & Financials</text>
        <text x="530" y="735" class="small">• Push Notifications</text>
        <text x="520" y="775" class="label" fill="#4338ca">Tech:</text>
        <text x="530" y="800" class="small">Go, Gin, GORM</text>
      </g>
      <g filter="url(#shadow)">
        <rect x="1075" y="550" width="700" height="450" rx="12" fill="white" stroke="#4338ca"/>
        <text x="1425" y="590" class="card-title" text-anchor="middle">Trip Service</text>
        <text x="1095" y="630" class="label" fill="#4338ca">Responsibilities:</text>
        <text x="1105" y="660" class="small">• Trip Lifecycle State Machine</text>
        <text x="1105" y="685" class="small">• Pricing Engine</text>
        <text x="1105" y="710" class="small">• Demand Ingestion (Trip Creation)</text>
        <text x="1105" y="735" class="small">• Real-time updates to clients</text>
        <rect x="1100" y="770" width="650" height="200" rx="8" fill="#f1f5f9" stroke="#cbd5e1" stroke-dasharray="4 4"/>
        <text x="1425" y="800" class="label" text-anchor="middle">Async Match Worker</text>
        <text x="1110" y="830" class="small">1. Consumes from Trip Queue (BRPOP)</text>
        <text x="1110" y="855" class="small">2. Finds driver via Driver Service</text>
        <text x="1110" y="880" class="small">3. Updates trip state in DB</text>
        <text x="1110" y="905" class="small">4. Notifies Rider via WebSocket</text>
      </g>
      <g filter="url(#shadow)">
        <rect x="1900" y="550" width="450" height="300" rx="12" fill="white" stroke="#4338ca"/>
        <text x="2125" y="590" class="card-title" text-anchor="middle">Driver Service</text>
        <text x="1920" y="630" class="label" fill="#4338ca">Responsibilities:</text>
        <text x="1930" y="660" class="small">• Real-time Location Ingestion</text>
        <text x="1930" y="685" class="small">• Geospatial Indexing (k-NN Search)</text>
        <text x="1930" y="710" class="small">• Fleet Management (Driver/Vehicle)</text>
        <text x="1930" y="735" class="small">• Driver Availability (Online/Offline)</text>
        <text x="1920" y="775" class="label" fill="#4338ca">Tech:</text>
        <text x="1930" y="800" class="small">Go, Gin, Redis GEO</text>
      </g>

      <!-- App Layer Communication -->
      <path d="M1420,500 V 550" stroke="#1e293b" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
      <text x="1430" y="530" class="arrow-label">Routes to ClusterIP Service</text>
      <path d="M1425,970 C1425,990 2125,990 2125,850" stroke="#4338ca" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
      <text x="1775" y="940" class="arrow-label">Sync REST: GET /v1/drivers/search</text>
      <path d="M1425,970 C1425,1020 820,1020 820,300" stroke="#4338ca" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
      <text x="1122" y="990" class="arrow-label">WebSocket Push: "Driver Found"</text>

      <!-- ==================== DATA & STATE LAYER ==================== -->
      <g filter="url(#shadow)">
        <rect x="500" y="1140" width="900" height="250" rx="12" fill="white" stroke="#059669"/>
        <text x="950" y="1180" class="card-title" text-anchor="middle">PostgreSQL 15 (Database-per-Service)</text>
        <rect x="550" y="1220" width="250" height="120" rx="8" fill="#ecfdf5" stroke="#6ee7b7"/>
        <text x="675" y="1260" class="label" text-anchor="middle">user_service_db</text>
        <text x="675" y="1285" class="mono" text-anchor="middle">users, wallets</text>
        <rect x="850" y="1220" width="250" height="120" rx="8" fill="#ecfdf5" stroke="#6ee7b7"/>
        <text x="975" y="1260" class="label" text-anchor="middle">trip_service_db</text>
        <text x="975" y="1285" class="mono" text-anchor="middle">trips, pricing</text>
        <rect x="1150" y="1220" width="200" height="120" rx="8" fill="#ecfdf5" stroke="#6ee7b7"/>
        <text x="1250" y="1260" class="label" text-anchor="middle">driver_service_db</text>
        <text x="1250" y="1285" class="mono" text-anchor="middle">drivers, vehicles</text>
      </g>
      <g filter="url(#shadow)">
        <rect x="1500" y="1140" width="900" height="250" rx="12" fill="white" stroke="#059669"/>
        <text x="1950" y="1180" class="card-title" text-anchor="middle">Redis 7 (In-Memory Store)</text>
        <rect x="1550" y="1220" width="250" height="120" rx="8" fill="#ecfdf5" stroke="#6ee7b7"/>
        <text x="1675" y="1260" class="label" text-anchor="middle">Async Queue</text>
        <text x="1675" y="1285" class="mono" text-anchor="middle">LPUSH / BRPOP</text>
        <text x="1675" y="1305" class="mono" text-anchor="middle">queue:trip:requests</text>
        <rect x="1850" y="1220" width="250" height="120" rx="8" fill="#ecfdf5" stroke="#6ee7b7"/>
        <text x="1975" y="1260" class="label" text-anchor="middle">GEO Index</text>
        <text x="1975" y="1285" class="mono" text-anchor="middle">GEOADD / GEORADIUS</text>
        <text x="1975" y="1305" class="mono" text-anchor="middle">drivers:available</text>
        <rect x="2150" y="1220" width="200" height="120" rx="8" fill="#ecfdf5" stroke="#6ee7b7"/>
        <text x="2250" y="1260" class="label" text-anchor="middle">Cache</text>
        <text x="2250" y="1285" class="mono" text-anchor="middle">home:promotions</text>
      </g>

      <!-- Data Layer Communication -->
      <path d="M725,850 V 1140" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
      <text x="735" y="1000" class="arrow-label">Owns DB</text>
      <path d="M1425,1000 V 1140" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
      <text x="1435" y="1075" class="arrow-label">Owns DB</text>
      <path d="M2125,850 V 1140" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
      <text x="2135" y="1000" class="arrow-label">Owns DB</text>
      <path d="M1425,1000 C1425,1050 1675,1050 1675,1140" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
      <text x="1550" y="1080" class="arrow-label">LPUSH trip:requests</text>
      <path d="M2125,850 C2125,1050 1975,1050 1975,1140" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
      <text x="2050" y="1080" class="arrow-label">GEOADD</text>
      <path d="M1975,1140 C1975,1050 2125,1050 2125,850" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
      <text x="2050" y="980" class="arrow-label">GEORADIUS</text>

      <!-- ==================== PLATFORM & RUNTIME ==================== -->
      <g filter="url(#shadow)">
        <rect x="700" y="1520" width="1600" height="180" rx="12" fill="white" stroke="#94a3b8"/>
        <text x="1500" y="1560" class="card-title" text-anchor="middle">Kubernetes Cluster (k3s for Local Dev)</text>
        <text x="800" y="1600" class="label">• Services exposed as ClusterIP</text>
        <text x="800" y="1625" class="label">• Traefik Ingress routes external traffic</text>
        <text x="800" y="1650" class="label">• Data services run as StatefulSets</text>
        <text x="800" y="1675" class="label">• Persistent data via PVCs (local-path-provisioner)</text>
      </g>

      <!-- ==================== OPERATIONS & DELIVERY (SIDEBAR) ==================== -->
      <g>
        <rect x="60" y="200" width="300" height="300" rx="12" fill="white" stroke="#db2777"/>
        <text x="210" y="240" class="card-title" text-anchor="middle">CI Pipeline</text>
        <text x="210" y="265" class="small" text-anchor="middle">GitHub Actions</text>
        <text x="80" y="300" class="label">On push/PR to main/dev:</text>
        <text x="90" y="330" class="small">1. Checkout & Cache</text>
        <text x="90" y="355" class="small">2. Lint & Vet</text>
        <text x="90" y="380" class="small">3. Test & Coverage Check (>80%)</text>
        <text x="90" y="405" class="small">4. Build Docker Images</text>
        <text x="90" y="430" class="small">5. Scan with Trivy</text>
        <text x="90" y="455" class="small">6. Push to GHCR</text>
      </g>
      <path d="M210,500 V 550" stroke="#db2777" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
      <text x="220" y="530" class="arrow-label">Push Image</text>
      <g>
        <rect x="60" y="550" width="300" height="100" rx="12" fill="white" stroke="#db2777"/>
        <text x="210" y="590" class="card-title" text-anchor="middle">GHCR</text>
        <text x="210" y="615" class="small" text-anchor="middle">GitHub Container Registry</text>
      </g>
      <path d="M210,650 V 700" stroke="#db2777" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
      <text x="220" y="680" class="arrow-label">Update Tag</text>
      <g>
        <rect x="60" y="700" width="300" height="200" rx="12" fill="white" stroke="#db2777"/>
        <text x="210" y="740" class="card-title" text-anchor="middle">GitOps CD</text>
        <text x="80" y="780" class="label">1. CI commits image tag update</text>
        <text x="100" y="800" class="mono">kustomization.yaml</text>
        <text x="80" y="830" class="label">2. ArgoCD detects Git change</text>
        <text x="80" y="855" class="label">3. ArgoCD syncs k8s cluster</text>
      </g>
      <path d="M360,800 H 700" stroke="#db2777" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
      <text x="530" y="790" class="arrow-label">GitOps Sync</text>
      <g>
        <rect x="60" y="950" width="300" height="250" rx="12" fill="white" stroke="#db2777"/>
        <text x="210" y="990" class="card-title" text-anchor="middle">Observability</text>
        <text x="80" y="1030" class="label" fill="#047857">Metrics:</text>
        <text x="150" y="1030" class="small">Prometheus</text>
        <text x="80" y="1060" class="label" fill="#ca8a04">Logs:</text>
        <text x="150" y="1060" class="small">Loki + Promtail</text>
        <text x="80" y="1090" class="label" fill="#7c3aed">Errors:</text>
        <text x="150" y="1090" class="small">Sentry</text>
        <text x="80" y="1120" class="label" fill="#f59e0b">Dashboards:</text>
        <text x="180" y="1120" class="small">Grafana</text>
      </g>
      <path d="M500, 700 C 400, 800, 360, 1000, 360, 1060" stroke="#ca8a04" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
      <text x="400" y="900" class="arrow-label">Emit Logs</text>
      <path d="M500, 750 C 400, 850, 360, 1050, 360, 1030" stroke="#047857" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
      <text x="400" y="950" class="arrow-label">Scrape Metrics</text>
      <g>
        <rect x="60" y="1250" width="300" height="200" rx="12" fill="white" stroke="#db2777"/>
        <text x="210" y="1290" class="card-title" text-anchor="middle">Testing</text>
        <text x="80" y="1330" class="label">• Unit/Integration:</text>
        <text x="220" y="1330" class="small">Go test</text>
        <text x="80" y="1360" class="label">• UI/Widget:</text>
        <text x="180" y="1360" class="small">Flutter test</text>
        <text x="80" y="1390" class="label">• Load Testing:</text>
        <text x="200" y="1390" class="small">Grafana k6</text>
      </g>
      <path d="M360,1390 C 600,1300, 1000,1000, 1270, 460" stroke="#1e293b" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
      <text x="800" y="1200" class="arrow-label">k6 hits Ingress</text>

      <!-- Legend -->
      <g>
        <rect x="60" y="1500" width="300" height="200" rx="12" fill="white" stroke="#9ca3af"/>
        <text x="210" y="1540" class="card-title" text-anchor="middle">Legend</text>
        <path d="M80,1580 H 140" stroke="#1e293b" stroke-width="2.5" fill="none" marker-end="url(#arrow-solid)"/>
        <text x="150" y="1585" class="small">Sync Call (REST/gRPC)</text>
        <path d="M80,1610 H 140" stroke="#4338ca" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
        <text x="150" y="1615" class="small">Async / Event (Queue, WS)</text>
        <path d="M80,1640 H 140" stroke="#047857" stroke-width="2.5" fill="none" marker-end="url(#arrow-data)"/>
        <text x="150" y="1645" class="small">Data Access (DB/Cache)</text>
        <path d="M80,1670 H 140" stroke="#db2777" stroke-width="2.5" stroke-dasharray="8 4" fill="none" marker-end="url(#arrow-dashed)"/>
        <text x="150" y="1675" class="small">CI/CD & Ops Flow</text>
      </g>
    </svg>
  </div>
</body>
</html>
