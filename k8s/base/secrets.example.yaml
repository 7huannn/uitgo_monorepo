# ⚠️ SECURITY WARNING: This is a TEMPLATE file only
# DO NOT fill in real values here and commit to git!
# 
# For production, use one of these secure methods:
# 1. Sealed Secrets (recommended for GitOps) - see sealed-secrets-controller.yaml
# 2. External Secrets Operator with AWS Secrets Manager/Vault
# 3. kubectl create secret (manual, not GitOps friendly)
#
# To create secrets manually:
# kubectl create secret generic uitgo-secrets \
#   --from-literal=POSTGRES_USER=<user> \
#   --from-literal=POSTGRES_PASSWORD=$(openssl rand -base64 24) \
#   --from-literal=JWT_SECRET=$(openssl rand -base64 32) \
#   --from-literal=REFRESH_TOKEN_ENCRYPTION_KEY=$(openssl rand -base64 32) \
#   --from-literal=INTERNAL_API_KEY=$(openssl rand -base64 32) \
#   --from-literal=REDIS_PASSWORD=$(openssl rand -base64 24) \
#   -n uitgo
#
# For Grafana:
# kubectl create secret generic grafana-secrets \
#   --from-literal=admin-password=$(openssl rand -base64 24) \
#   -n monitoring

apiVersion: v1
kind: Secret
metadata:
  name: uitgo-secrets
  namespace: uitgo
  labels:
    app.kubernetes.io/name: uitgo
type: Opaque
stringData:
  # Database credentials - MUST be changed
  POSTGRES_USER: "uitgo"
  POSTGRES_PASSWORD: "CHANGE_ME_USE_STRONG_PASSWORD_MIN_24_CHARS"
  
  # JWT secrets - Generate using: openssl rand -base64 32
  JWT_SECRET: "CHANGE_ME_GENERATE_NEW_32_BYTE_KEY"
  REFRESH_TOKEN_ENCRYPTION_KEY: "CHANGE_ME_GENERATE_NEW_32_BYTE_KEY"
  
  # Internal API key for service-to-service calls
  INTERNAL_API_KEY: "CHANGE_ME_GENERATE_STRONG_KEY"
  
  # Redis password
  REDIS_PASSWORD: "CHANGE_ME_USE_STRONG_PASSWORD"

---
# Database connection strings
apiVersion: v1
kind: Secret
metadata:
  name: uitgo-db-secrets
  namespace: uitgo
type: Opaque
stringData:
  # Replace passwords with actual values from uitgo-secrets
  USER_SERVICE_DSN: "postgres://uitgo:CHANGE_ME@user-db:5432/user_service?sslmode=require"
  TRIP_SERVICE_DSN: "postgres://uitgo:CHANGE_ME@trip-db:5432/trip_service?sslmode=require"
  DRIVER_SERVICE_DSN: "postgres://uitgo:CHANGE_ME@driver-db:5432/driver_service?sslmode=require"
